<h2>Driver Licence Registration</h2>

<br><p>Please fill out this form. To enter a new person as well as a new driver's licence, please fill out the form past driving condition. If you just want to make a new driver's licence with an existing person, please only fill out the first part of the form. When you've completed your form, please click the submit button at the bottom of the page.</p><br>
<div class="vertical-section-container centered">

    <iframe height="50px" border="0" name="emptyframe" id="emptyframe"></iframe>
    <form action="upload.php" method="post" enctype="multipart/form-data" target="emptyframe">
        <paper-input type="file" name="fileToUpload" id="fileToUpload"></paper-input>
        <paper-input type="submit" value="Upload Image" name="submit"></paper-input>
    </form>
    <form is="iron-form" method="get" action="/" id="basic" style="width: 500px;">

        <paper-input name="licence_no" label="Licence Number" required char-counter maxlength="15"></paper-input>

        <paper-input name="sin" label="Social Insurance Number" required char-counter maxlength="15" ></paper-input>

        <paper-input name="class" label="Class" required char-counter maxlength="10"></paper-input>

        <paper-input name="issuing_date" label="Issuing Date" required char-counter maxlength="10"></paper-input><br>
        <p>Please use the following format, yyyy-mm-dd. Please add the hyphens.</p>

        <paper-input name="expiring_date" label="Expiring Date" required char-counter maxlength="10" ></paper-input><br>
        <p>Please use the following format, yyyy-mm-dd. Please add the hyphens.</p>

        <paper-textarea name="driving_cond" label="Driving Condition" char-counter maxlength="1024"></paper-textarea>

        <!------------------------------------------------------------------------>

        <br><br>
        <h2>New Person</h2>
        <p>If this new licence is for a new individual, please fill out the following form as well.</p>

        <paper-input name="name" label="Name" char-counter maxlength="40"></paper-input>

        <paper-input name="height" label="Height (cm)" char-counter maxlength="6" auto-validate pattern="[[0-9]{3}.[0-9]{2}]*" error-message="Please type a number with 5 digets before the decimal, and two after the decimal."></paper-input>

        <paper-input name="weight" label="Weight (kg)" char-counter maxlength="6" auto-validate pattern="[[0-9]{3}.[0-9]{2}]*" error-message="Please type a number with 5 digets before the decimal, and two after the decimal."></paper-input>

        <paper-input name="eye_color" label="Eye Color" char-counter maxlength="10"></paper-input>

        <paper-input name="hair_color" label="Hair Color" char-counter maxlength="10"></paper-input>

        <paper-input name="addr" label="Address" char-counter maxlength="50"></paper-input>

        <paper-input name="gender" label="Gender" char-counter maxlength="1" auto-validate pattern="[fmMF]*" error-message="Male = M,  Female = F"></paper-input>

        <paper-input name="bday" label="Birthday" ></paper-input><br>
        <p>Please use the following format, yyyy-mm-dd. Please add the hyphens.</p>
	<br>
	<br>

        <paper-button raised onclick="_submit(event)">Submit</paper-button>
        <paper-button raised onclick="_reset(event)">Reset</paper-button>
        <div class="output"></div>
    </form>

    <script>
        function _submit(event) {
            Polymer.dom(event).localTarget.parentElement.submit();
        }
        function _reset(event) {
            var form = Polymer.dom(event).localTarget.parentElement
            form.reset();
            form.querySelector('.output').innerHTML = '';
        }
        basic.addEventListener('iron-form-submit', function(event) {
        var myRequest = new XMLHttpRequest();
        myRequest.onreadystatechange = function() {
                if (myRequest.readyState == 4 && myRequest.status == 200) {
                    document.getElementsByClassName('output')[0].innerHTML = myRequest.responseText;
            }
            };
        myRequest.open("GET", "/cgi-bin/Drive-Licence.cgi?"+"sin="+document.getElementsByName("sin")[0].value+"&"+"name="+document.getElementsByName("name")[0].value+"&"+"height="+document.getElementsByName("height")[0].value+"&"+"weight="+document.getElementsByName("weight")[0].value+"&"+"eye_color="+document.getElementsByName("eye_color")[0].value+"&"+"hair_color="+document.getElementsByName("hair_color")[0].value+"&"+"addr="+document.getElementsByName("addr")[0].value+"&"+"gender="+document.getElementsByName("gender")[0].value+"&"+"bday="+document.getElementsByName("bday")[0].value+"&"+"licence_no="+document.getElementsByName("licence_no")[0].value+"&"+"class="+document.getElementsByName("class")[0].value+"&"+"issuing_date="+document.getElementsByName("issuing_date")[0].value+"&"+"expiring_date="+document.getElementsByName("expiring_date")[0].value+"&"+"driving_cond="+document.getElementsByName("driving_cond")[0].value);
        myRequest.send();
        });
    </script>

</div>
<br><br><br><br>
